@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Tokens de cor para Dark Mode (CSS variables) ===== */
:root {
  --bg: 246 254 249;        /* page-bg #f6fef9 */
  --fg: 17 24 39;           /* gray-900 */
  --card: 255 255 255;
  --cardFg: 17 24 39;
  --muted: 100 116 139;     /* slate-500 */
  --border: 229 231 235;    /* gray-200 */
  --input: 229 231 235;
}

.dark {
  --bg: 15 23 42;           /* slate-900 */
  --fg: 241 245 249;        /* slate-100 */
  --card: 30 41 59;         /* slate-800 */
  --cardFg: 241 245 249;
  --muted: 148 163 184;     /* slate-400 */
  --border: 51 65 85;       /* slate-700 */
  --input: 51 65 85;
}

/* Página pública de orçamento: sempre tema claro (não alterar) */
.force-light {
  --bg: 246 254 249;
  --fg: 17 24 39;
  --card: 255 255 255;
  --cardFg: 17 24 39;
  --muted: 100 116 139;
  --border: 229 231 235;
  --input: 229 231 235;
}

@layer base {
  * {
    border-color: rgb(var(--border));
  }

  html {
    height: 100%;
    background: rgb(var(--bg));
    color: rgb(var(--fg));
  }

  body {
    height: 100%;
    background: rgb(var(--bg));
    color: rgb(var(--fg));
    font-feature-settings: "rlig" 1, "calt" 1;
    @apply antialiased;
  }

  #root {
    height: 100%;
    min-height: 100%;
    background: rgb(var(--bg));
  }
}

@layer utilities {
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}

@keyframes slideInFromTop {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInFromBottom {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.animate-slide-in-top {
  animation: slideInFromTop 0.3s ease-out;
}

.animate-slide-in-bottom {
  animation: slideInFromBottom 0.3s ease-out;
}

.animate-fade-in {
  animation: fadeIn 0.2s ease-out;
}

input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type="number"] {
  -moz-appearance: textfield;
}

:focus-visible {
  outline: none;
}

/* ===== MOBILE ONLY (viewport fix: evita "pulo" quando barras do navegador aparecem/desaparecem) ===== */
@media (max-width: 768px) {
  html,
  body {
    height: 100%;
    overflow: hidden;
    position: fixed;
    width: 100%;
  }

  body {
    overscroll-behavior: none;
  }

  /* Página pública de orçamento: permitir scroll e pinch-zoom */
  html:has(body.public-quote-page) {
    overflow: auto !important;
    position: relative !important;
  }

  body.public-quote-page {
    overflow: auto !important;
    overflow-x: auto;
    position: relative !important;
    margin: 0;
    padding: 0;
    touch-action: manipulation;
    -webkit-text-size-adjust: 100%;
  }

  body.public-quote-page #root {
    min-height: 100%;
  }

  #root {
    height: calc(var(--vh, 1dvh) * 100);
    overflow: auto;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: none;
  }

  body.public-quote-page #root {
    overflow: visible;
    height: auto;
    min-height: 100%;
  }

  /* Prevenir zoom em inputs no iOS (font-size mínimo 16px) */
  input,
  textarea,
  select {
    font-size: max(16px, 1em);
  }
}
